<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <title>百度地图及图文信息窗口示例</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 引入百度地图 JavaScript API -->
    <script src="https://api.map.baidu.com/api?type=webgl&v=1.0&ak=rxkgnzZqvLGZYlmXjmDB2dj37vZr7LZ4"></script>
</head>
<body>
    <div id="container"></div>
    <script>
        var map = new BMapGL.Map('container');
        map.centerAndZoom(new BMapGL.Point(116.404, 39.915), 15);
        map.enableScrollWheelZoom(true);
        // 创建添加点标记
        var marker = new BMapGL.Marker(new BMapGL.Point(116.404, 39.915));
        map.addOverlay(marker);
        // 创建图文信息窗口
        var sContent = `<h4 style='margin:0 0 5px 0;'>天安门</h4>
            <img style='float:right;margin:0 4px 22px' id='imgDemo' src='../img/tianAnMen.jpg' width='139' height='104'/>
            <p style='margin:0;line-height:1.5;font-size:13px;text-indent:2em'>
            天安门坐落在中国北京市中心,故宫的南侧,与天安门广场隔长安街相望,是清朝皇城的大门...
            </p>`;
        var infoWindow = new BMapGL.InfoWindow(sContent);
        // marker添加点击事件
        marker.addEventListener('click', function () {
            this.openInfoWindow(infoWindow);
            // 图片加载完毕重绘infoWindow
            document.getElementById('imgDemo').onload = function () {
                infoWindow.redraw(); // 防止在网速较慢时生成的信息框高度比图片总高度小，导致图片部分被隐藏
            };
        });
    </script>
</body>
</html>
